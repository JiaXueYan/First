webpackJsonp([3],{"0/q7":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"versions"}},[a("div",{staticClass:"versions_nav"},[a("div",{staticClass:"title"},[t._v("\n      版本管理\n      "),a("el-button",{staticStyle:{float:"right","margin-top":"8px"},attrs:{size:"mini",title:"添加角色"},on:{click:function(e){t.registrationmore=!0}}},[t._v("添加版本 "),a("i",{staticClass:"el-icon-plus"})]),a("el-tooltip",{attrs:{effect:"light",placement:"right","visible-arrow":t.tool}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("APP的版本管理")]),a("el-button",{staticClass:"help iconfont"},[t._v("")])],1)],1)]),a("div",{staticClass:"versions_con"},[a("div",{attrs:{id:"search"}},[a("div",{staticClass:"shuaxin"},[a("span",{staticClass:"shauxinspan",class:t.shua?"":"shuaxinBlue",on:{click:t.shuaxin}},[a("i",{staticClass:"iconfont shuaxinc",class:t.shua?"":"rotateI"},[t._v("")]),t._v(" 刷新 ")])]),t._m(0)]),a("el-table",{attrs:{data:t.applist}},[a("el-table-column",{attrs:{label:"版本名称",prop:"versionName"}}),a("el-table-column",{attrs:{label:"版本号",prop:"versionCode"}}),a("el-table-column",{attrs:{label:"版本信息",prop:"comment"}}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(null!=e.row.insertTime?e.row.insertTime:"-- --")+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"sign密码",prop:"signPwd"}}),a("el-table-column",{attrs:{label:"系统类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(null!=e.row.systemFrom?0==e.row.systemFrom?"安卓":"苹果":"-- --")+"\n        ")]}}])})],1),a("el-dialog",{attrs:{title:"添加APK",visible:t.registrationmore,"append-to-body":!0,"before-close":t.escRea},on:{"update:visible":function(e){t.registrationmore=e}}},[a("el-steps",{attrs:{active:t.active,simple:"",space:200}},[a("el-step",{attrs:{title:"填写信息",icon:"el-icon-edit"}}),a("el-step",{attrs:{title:"上传Apk ",icon:"el-icon-upload"}}),a("el-step",{attrs:{title:"返回信息",icon:"el-icon-picture"}})],1),a("el-tabs",{attrs:{value:t.activa},on:{"tab-click":t.handleClick},model:{value:t.activa,callback:function(e){t.activa=e},expression:"activa"}},[a("el-tab-pane",{attrs:{name:"1"}},[a("div",{staticClass:"restion"},[a("el-form",{ref:"addApp",attrs:{model:t.addApp,rules:t.addAppRules,"status-icon":""}},[a("el-form-item",{attrs:{label:"版本名称",prop:"versionName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入版本名称","auto-complete":"off"},model:{value:t.addApp.versionName,callback:function(e){t.$set(t.addApp,"versionName",e)},expression:"addApp.versionName"}})],1),a("el-form-item",{attrs:{label:"版本号",prop:"versionCode"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入版本号","auto-complete":"off"},model:{value:t.addApp.versionCode,callback:function(e){t.$set(t.addApp,"versionCode",e)},expression:"addApp.versionCode"}})],1),a("el-form-item",{attrs:{label:"系统类型",prop:"systemFrom"}},[a("el-radio-group",{model:{value:t.addApp.systemFrom,callback:function(e){t.$set(t.addApp,"systemFrom",e)},expression:"addApp.systemFrom"}},[a("el-radio",{attrs:{label:"0"}},[t._v("安卓")]),a("el-radio",{attrs:{label:"1"}},[t._v("苹果")])],1)],1),a("el-form-item",{attrs:{label:"描述",prop:"comment"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入描述","auto-complete":"off"},model:{value:t.addApp.comment,callback:function(e){t.$set(t.addApp,"comment",e)},expression:"addApp.comment"}})],1),a("el-form-item",{attrs:{label:"sign密码",prop:"signPwd"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入sign密码","auto-complete":"off"},model:{value:t.addApp.signPwd,callback:function(e){t.$set(t.addApp,"signPwd",e)},expression:"addApp.signPwd"}})],1)],1)],1)]),a("el-tab-pane",{staticStyle:{"text-align":"center"},attrs:{name:"2"}},[a("div",{staticClass:"restion"},[a("el-upload",{attrs:{drag:"","on-error":t.errorback,"before-upload":t.beforeUpload,action:"http://192.168.1.32:8081/version/addFile","on-success":t.success,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请上传对应格式的.apk文件")])])],1)]),a("el-tab-pane",{attrs:{name:"3"}},[a("div",{staticClass:"restion"},[a("p",{staticStyle:{"line-height":"40px"}},[t._v("  该App"+t._s(t.addApp.versionName)+" "+t._s(t.successData.msg))]),a("p",{staticStyle:{"font-size":"10px",color:"#a7a7a7"}},[t._v("注：请点击完成退出界面")])])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[t.active>0&&t.active<2?a("el-button",{on:{click:t.prve}},[t._v("上一步")]):t._e(),t.active<2&&t.onoff?a("el-button",{on:{click:function(e){t.next("addApp")}}},[t._v("下一步")]):t._e(),2==t.active?a("el-button",{on:{click:function(e){t.registrationmore=!1}}},[t._v("完成")]):t._e()],1)],1)],1)])};s._withStripped=!0;var i={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search_con"},[e("i",{staticClass:"iconfont"},[this._v("")]),e("input",{attrs:{type:"search",placeholder:"请输入搜索内容"}})])}]};e.a=i},"0ieM":function(t,e,a){(t.exports=a("UTlt")(!1)).push([t.i,"#versions{width:100%;height:100%;position:relative}.versions_nav{height:44px;text-align:left;line-height:44px;font-size:14px;font-family:黑体;font-weight:700;border-bottom:1px solid #dfdfdf}.el-dialog .el-tabs__nav-scroll{display:none}.versions_nav .title{width:96%;margin:0 auto;height:44px}.restion{width:100%;height:300px}.versions_con{width:96%;margin:20px auto;font-size:14px;height:600px;position:relative;padding-top:50px}",""])},Aa4i:function(t,e,a){var s=a("0ieM");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("FIqI")("525f02c2",s,!1,{sourceMap:!1})},cUfY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("kA0M"),i=a("0/q7"),o=!1;var n=function(t){o||a("Aa4i")},l=a("X4nt")(s.a,i.a,!1,n,null,null);l.options.__file="pages\\System\\versions\\index.vue",e.default=l.exports},kA0M:function(t,e,a){"use strict";e.a={name:"versions",data:function(){var t=function(t,e,a){""===e?a(new Error("此处不能为空")):a()};return{path:null,onoff:!0,addApp:{versionName:"1.0.1",versionCode:"1",systemFrom:"0",comment:"",signPwd:"123456"},active:0,applist:[],activa:"1",shua:!0,registrationmore:!1,tool:!1,addAppRules:{versionName:[{required:!0,validator:t,trigger:"blur"}],versionCode:[{required:!0,validator:t,trigger:"blur"}],systemFrom:[{required:!0,validator:t,trigger:"blur"}],comment:[{required:!0,validator:t,trigger:"blur"}],signPwd:[{required:!0,validator:t,trigger:"blur"}]},successData:{msg:""}}},methods:{getVesionMax:function(){},prve:function(){this.active--,1==this.active?this.activa="2":2==this.active?this.activa="3":this.activa="1"},open:function(){},handleClick:function(t,e){console.log(t,e)},next:function(t){var e=this,a=void 0;null!=this.path&&(a=this.path),this.$refs[t].validate(function(t){t&&(e.active++,1==e.active?(e.activa="2",e.onoff=!1):2==e.active?void 0!=a?(e.addVersion(a),e.activa="3"):(e.activa="2",e.active=2):e.activa="1")})},escRea:function(){this.registrationmore=!1,this.active=0,this.activa="1",this.addApp={versionName:"",versionCode:"",systemFrom:"",comment:"",signPwd:""},this.$message({message:"取消添加APP版本"})},success:function(t,e,a){200==t.status&&(this.onoff=!0,this.path=t.data)},errorback:function(t,e,a){},beforeUpload:function(t){console.log(t)},shuaxin:function(){this.shua=!1,this.getAllApp()},addVersion:function(t){var e=this;this.$axios({url:"http://192.168.1.32:8081/version/addVersion",method:"post",data:{versionName:this.addApp.versionName,versionCode:this.addApp.versionCode,filePath:t,systemFrom:this.addApp.systemFrom,comment:this.addApp.comment,signPwd:this.addApp.signPwd}}).then(function(t){e.successData=t.data,200==t.data.status?e.$notify({title:"成功",message:"app"+e.addApp.versionName+t.data.msg,type:"success"}):400==t.data.status?e.$message({type:"error",message:t.data.msg}):e.$message({type:"warning",message:t.data.msg})})},getAllApp:function(){var t=this;this.$axios({url:"http://192.168.1.32:8081/version/getall",method:"post"}).then(function(e){200==e.data.status&&(t.applist=e.data.data),t.shua=!0})}},mounted:function(){this.getAllApp(),this.getVesionMax()}}}});