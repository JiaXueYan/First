webpackJsonp([9],{"2IsV":function(t,e,i){"use strict";e.a={name:"limit",data:function(){var t=function(t,e,i){""===e?i(new Error("访问方式不能为空")):i()},e=function(t,e,i){""===e?i(new Error("操作限制不能为空")):i()},i=function(t,e,i){""===e?i(new Error("权限地址不能为空")):i()},a=function(t,e,i){""===e?i(new Error("备注不能为空")):i()},s=function(t,e,i){""===e?i(new Error("显示    不能为空")):i()};return{limitTable:[],rote:!1,onOff:!1,shua:!0,tool:!0,limitForm:{accessName:"",accessMethod:"",accessType:"",uri:"",isShow:"",comment:""},rules2:{accessMethod:[{validator:t,trigger:"change"}],accessType:[{validator:e,trigger:"change"}],uri:[{validator:i,trigger:"blur"}],comment:[{validator:a,trigger:"blur"}],isShow:[{validator:s,trigger:"change"}]},limitForm_:{accessName:"",accessMethod:"",accessType:"",uri:"",isShow:"",comment:""},registration:!1,limitRote:{accessName:[{required:!0,validator:function(t,e,i){if(!e)return i(new Error("权限名称不能为空"));i()},trigger:"blur"}],accessMethod:[{required:!0,validator:t,trigger:"change"}],accessType:[{required:!0,validator:e,trigger:"change"}],uri:[{required:!0,validator:i,trigger:"blur"}],comment:[{required:!0,validator:a,trigger:"blur"}],isShow:[{required:!0,validator:s,trigger:"change"}]}}},methods:{escRea:function(){this.registration=!1,this.$message({message:"取消注册权限"})},escSetRote:function(){this.rote=!1,this.$message({type:"info",message:"取消修改"})},getAllRote:function(){var t=this;this.$axios.post("/access/getall").then(function(e){(e.data.status=200)&&(t.shua=!0,t.onOff=!1,t.limitTable=e.data.data)})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.post("/access/upAccess",{uri:e.limitForm.uri,id:e.limitForm.id,accessType:e.limitForm.accessType,accessMethod:e.limitForm.accessMethod,accessName:e.limitForm.accessName,isShow:e.limitForm.isShow,comment:e.limitForm.comment}).then(function(t){e.getAllRote(),200==t.data.status?e.$notify({title:"成功",type:"success",message:e.limitForm.accessName+t.data.msg}):400==t.data.status?e.$message({type:"error",message:t.data.msg}):e.$message({type:"warning",message:t.data.msg}),e.rote=!1})})},resetForm:function(t){this.$refs[t].resetFields()},setRote:function(t){this.limitForm={accessMethod:t.accessMethod,accessName:t.accessName,accessType:t.accessType,comment:t.comment,creatTime:t.creatTime,del:t.del,id:t.id,isShow:t.isShow,parent:t.parent,updateTime:t.updateTime,uri:t.uri},this.rote=!0},deleterote:function(t){var e=this;this.$axios.post("/access/delAccess",{id:t}).then(function(t){e.getAllRote(),200==t.data.status?e.$message({type:"success",message:t.data.msg}):400==t.data.status?e.$message({type:"error",message:t.data.msg}):e.$message({type:"warning",message:t.data.msg})})},submitForma:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$confirm("<div><ul><li>权限名称:"+e.limitForm_.accessName+"</li><li>权限地址:"+e.limitForm_.uri+"</li><li>parent:0</li><li>操作限制:"+e.limitForm_.accessType+"</li><li>访问方式:"+e.limitForm_.accessMethod+"</li><li>是否显示:"+e.limitForm_.isShow+"</li><li>备注:"+e.limitForm_.comment+"</li></ul></div>",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,beforeClose:function(t,i,a){i.confirmButtonLoading=!0,i.confirmButtonText="执行中...",e.$axios.post("/access/addAccess",{uri:e.limitForm_.uri,parent:0,accessType:e.limitForm_.accessType,accessMethod:e.limitForm_.accessMethod,accessName:e.limitForm_.accessName,isShow:0,comment:e.limitForm_.comment}).then(function(t){200==t.data.status?(e.$notify({title:"成功",message:"用户"+e.limitForm_.accessName+t.data.msg,type:"success"}),e.resetForm("limitForm_")):400==t.data.status?e.$message({type:"error",message:t.data.msg}):e.$message({type:"warning",message:t.data.msg}),a(),e.registration=!1,i.confirmButtonLoading=!1})}}).then(function(){}).catch(function(){e.$message({type:"info",message:"取消提交"})})})},resetForma:function(t){this.$refs[t].resetFields()},shuaxin:function(){this.shua=!1,this.getAllRote()}},mounted:function(){this.getAllRote()},beforeMount:function(){this.onOff=!0},beforeCreate:function(){},beforeDestroy:function(){},beforeUpdate:function(){}}},BcaJ:function(t,e,i){(t.exports=i("UTlt")(!1)).push([t.i,"#limit[data-v-6c8bca0a]{width:100%;height:100%;position:relative}.limit_nav[data-v-6c8bca0a]{height:44px;text-align:left;line-height:44px;font-size:14px;font-family:黑体;font-weight:700;border-bottom:1px solid #dfdfdf}.limit_nav .title[data-v-6c8bca0a]{width:96%;margin:0 auto;height:44px}.limit_con[data-v-6c8bca0a]{width:96%;margin:20px auto;font-size:14px;height:600px;position:relative;padding-top:50px}",""])},ZJkN:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"limit"}},[i("div",{staticClass:"limit_nav"},[i("div",{staticClass:"title"},[t._v("\n     权限管理\n      "),i("el-button",{staticStyle:{float:"right","margin-top":"8px"},attrs:{size:"mini",title:"添加权限"},on:{click:function(e){t.registration=!0}}},[t._v("注册权限 "),i("i",{staticClass:"el-icon-plus"})]),i("el-tooltip",{attrs:{effect:"light",placement:"right","visible-arrow":t.tool}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("权限注册")]),i("el-button",{staticClass:"help iconfont"},[t._v("")])],1)],1)]),i("div",{staticClass:"limit_con"},[i("div",{attrs:{id:"search"}},[i("div",{staticClass:"shuaxin"},[i("span",{staticClass:"shauxinspan",class:t.shua?"":"shuaxinBlue",on:{click:t.shuaxin}},[i("i",{staticClass:"iconfont shuaxinc",class:t.shua?"":"rotateI"},[t._v("")]),t._v(" 刷新 ")])]),t._m(0)]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.onOff,expression:"onOff"}],attrs:{data:t.limitTable,"label-position":"left",height:"100%","element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"权限名称",prop:"accessName",sortable:""}}),i("el-table-column",{attrs:{label:"访问方式",prop:"accessMethod",sortable:""}}),i("el-table-column",{attrs:{label:"操作限制",prop:"accessType",sortable:""}}),i("el-table-column",{attrs:{label:"权限地址",prop:"uri",sortable:""}}),i("el-table-column",{attrs:{label:"备注",prop:"comment",sortable:""}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{margin:"0"},attrs:{size:"mini"},on:{click:function(i){t.setRote(e.row)}}},[t._v(" 编辑")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.deleterote(e.row.id)}}},[t._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"修改权限信息",visible:t.rote,"append-to-body":!0,"before-close":t.escSetRote},on:{"update:visible":function(e){t.rote=e}}},[i("el-form",{ref:"limitForm",staticClass:"demo-ruleForm",attrs:{model:t.limitForm,"status-icon":"",rules:t.rules2,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"权限名称"}},[t._v("\n          "+t._s(t.limitForm.accessName)+"\n        ")]),i("el-form-item",{attrs:{label:"访问方式",prop:"accessMethod"}},[i("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.limitForm.accessMethod,callback:function(e){t.$set(t.limitForm,"accessMethod",e)},expression:"limitForm.accessMethod"}})],1),i("el-form-item",{attrs:{label:"操作限制",prop:"accessType"}},[i("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.limitForm.accessType,callback:function(e){t.$set(t.limitForm,"accessType",e)},expression:"limitForm.accessType"}})],1),i("el-form-item",{attrs:{label:"权限地址",prop:"uri"}},[i("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.limitForm.uri,callback:function(e){t.$set(t.limitForm,"uri",e)},expression:"limitForm.uri"}})],1),i("el-form-item",{attrs:{label:"显示",prop:"comment"}},[i("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.limitForm.isShow,callback:function(e){t.$set(t.limitForm,"isShow",e)},expression:"limitForm.isShow"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"comment"}},[i("el-input",{attrs:{type:"texterea","auto-complete":"off"},model:{value:t.limitForm.comment,callback:function(e){t.$set(t.limitForm,"comment",e)},expression:"limitForm.comment"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("limitForm")}}},[t._v("提交")]),i("el-button",{on:{click:t.escSetRote}},[t._v("取消")])],1)],1)],1)],1),i("el-dialog",{attrs:{title:"注册权限",visible:t.registration,"append-to-body":!0,"before-close":t.escRea},on:{"update:visible":function(e){t.registration=e}}},[i("el-form",{ref:"limitForm_",staticClass:"demo-ruleForm",staticStyle:{"text-align":"left","padding-top":"10px","box-sizing":"border-box"},attrs:{model:t.limitForm_,"status-icon":"",rules:t.limitRote}},[i("el-form-item",{attrs:{label:"权限名称",prop:"accessName"}},[i("el-input",{staticStyle:{width:"245px","margin-top":"5px"},attrs:{type:"test","auto-complete":"off",placeholder:"请输入权限名称"},model:{value:t.limitForm_.accessName,callback:function(e){t.$set(t.limitForm_,"accessName",e)},expression:"limitForm_.accessName"}})],1),i("el-form-item",{attrs:{label:"访问方式",prop:"accessMethod"}},[i("el-radio",{attrs:{label:"get"},model:{value:t.limitForm_.accessMethod,callback:function(e){t.$set(t.limitForm_,"accessMethod",e)},expression:"limitForm_.accessMethod"}},[t._v("GET")]),i("el-radio",{attrs:{label:"post"},model:{value:t.limitForm_.accessMethod,callback:function(e){t.$set(t.limitForm_,"accessMethod",e)},expression:"limitForm_.accessMethod"}},[t._v("POST")])],1),i("el-form-item",{attrs:{label:"操作限制",prop:"accessType"}},[i("el-radio-group",{model:{value:t.limitForm_.accessType,callback:function(e){t.$set(t.limitForm_,"accessType",e)},expression:"limitForm_.accessType"}},[i("el-radio",{attrs:{label:"0"}},[t._v("是")]),i("el-radio",{attrs:{label:"1"}},[t._v("否")])],1)],1),i("el-form-item",{attrs:{label:"权限地址",prop:"uri"}},[i("el-input",{staticStyle:{width:"245px","margin-top":"5px"},attrs:{type:"text","auto-complete":"off",placeholder:"请输入权限地址"},model:{value:t.limitForm_.uri,callback:function(e){t.$set(t.limitForm_,"uri",e)},expression:"limitForm_.uri"}})],1),i("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"显示",prop:"isShow"}},[i("el-radio-group",{model:{value:t.limitForm_.isShow,callback:function(e){t.$set(t.limitForm_,"isShow",e)},expression:"limitForm_.isShow"}},[i("el-radio",{attrs:{label:"0"}},[t._v("是")]),i("el-radio",{attrs:{label:"1"}},[t._v("否")])],1)],1),i("el-form-item",{attrs:{label:"备注",prop:"comment"}},[i("el-input",{staticStyle:{width:"245px","margin-top":"5px"},attrs:{type:"texterea","auto-complete":"off",placeholder:"请输入备注"},model:{value:t.limitForm_.comment,callback:function(e){t.$set(t.limitForm_,"comment",e)},expression:"limitForm_.comment"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForma("limitForm_")}}},[t._v("提交")]),i("el-button",{on:{click:function(e){t.resetForma("limitForm_")}}},[t._v("重置")])],1)],1)],1)],1)};a._withStripped=!0;var s={render:a,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search_con"},[e("i",{staticClass:"iconfont"},[this._v("")]),e("input",{attrs:{type:"search",placeholder:"请输入搜索内容"}})])}]};e.a=s},hQ1y:function(t,e,i){var a=i("BcaJ");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("FIqI")("4778b9ae",a,!1,{sourceMap:!1})},lpNE:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("2IsV"),s=i("ZJkN"),o=!1;var l=function(t){o||i("hQ1y")},r=i("X4nt")(a.a,s.a,!1,l,"data-v-6c8bca0a",null);r.options.__file="pages\\System\\limit\\index.vue",e.default=r.exports}});